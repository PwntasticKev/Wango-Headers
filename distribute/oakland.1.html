<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>OakLand</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="css/reset.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="css/oakland.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

</head>
<body>
  <header>
    <section class="main-section">
      <form action="https://www.visitoakland.com/search/" method="GET" data-sv-searchform="" style='display: flex;'>
        <div class="search-btn" data-sv-searchbtn="" aria-hidden="true"><i class="fa fa-search" aria-hidden="true"></i></div>
          <input class='mobile-search-input' type="search"  value="" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" class="searchInput ae-form-field" name="q" data-sv-searchinput="" data-ae-blurbtype="input">
				</form>
      <section class='menu-title-container'>
      <div class="menu-title visit-oakland-menu">Visit Oakland</div>
        <div class="pipe">|</div>
        <div class="menu-title industry-menu">Industry</div>
      </section>
      <div class="logo standard-logo" data-sv-logo="" ><a href="https://www.visitoakland.com/"><img src="https://www.visitoakland.com/includes/public/assets/images/logo.svg"></a></div>
				<!-- //added section below -->
	
				<div class="nav-hit-cont nav-right">
	        <div class="upper-line"></div>
	          <div class="nav-hit-inner">
	              <div class="nav-hit-hider x">
	                  <img src="https://www.visitoakland.com/includes/public/assets/images/menu-text.svg" class="ae-img">
	              </div>
	          </div>
	          <div class="lower-line"></div>
	      </div>
    </section>
    <section class='lang-weather-container' >
        <div class='trans' id="google_translate_element">
           <img src="https://www.visitoakland.com//includes/public/assets/images/globe-icon.svg" class='fa-globe' alt="">
        </div>
      <div style='display:flex' id="Weather"></div>
    </section>
    <!-- VISIT OAKLAND MENU -->
    <ul class='oakland-menu-container'>
      <a href="https://www.visitoakland.com/things-to-do/"><li class='oakland-options'>Things To Do</li></a>
      <a href='https://www.visitoakland.com/events/'><li class='oakland-options'>Events</li></a>
      <a href='https://www.visitoakland.com/restaurants/'><li class='oakland-options'>Food & Drink</li></a>
      <a href='https://www.visitoakland.com/stay/'><li class='oakland-options'>Stay</li></a>
      <a href='https://www.visitoakland.com/plan/'><li class='oakland-options'>Trip Planning</li></a>
      <a href='https://www.visitoakland.com/meet/'><li class='oakland-options'>Meetings & Groups</li></a>
      <a href="http://www.youtube.com/visitoakland?sub_confirmation=1"><li class='oakland-options'>Oakland.TV</li></a>
    </ul>
    <!-- ↑ ↑ ↑ ↑ ↑ ↑ -->
    <!-- INDUSTRY MENU  -->
    <ul class="industry-container-menu">
        <a href="https://www.visitoakland.com/partners/"><li class="oakland-options">Partners</li></a>
        <a href="https://www.visitoakland.com/press/"><li class="oakland-options">Press Room</li></a>
        <a href="https://www.visitoakland.com/about/"><li class="oakland-options">About</li></a>
    </ul>
    <!-- ↑ ↑ ↑ ↑ ↑ ↑ -->


  </header>

  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
    }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script>
  
 $('.nav-hit-cont').unbind('click').bind('click',function() {
            $('.ae-img').animate({opacity: 'toggle'}, 250)
            $('.upper-line').toggleClass('menubefore-active')
            $('.lower-line').toggleClass('menuafter-active')
            $('.logo').toggle()
            $('.visit-oakland-menu').addClass('menu-title-active') // adds blue line underneath
            $('.menu-title-container').toggleClass('menu-title-container--active') //puts the container in flex.
            $('.industry-container-menu').hide()
            $('.industry-menu').removeClass('menu-title-active') //removes blue line 
             if ($('.oakland-menu-container').hasClass('oakland-active')) { 
                  $('.oakland-menu-container').removeClass('oakland-active'); 
               }
               else if ($('.industry-container-menu').hasClass('industry-active')) {
                $('.industry-container-menu').removeClass('industry-active');
               }
                else { $('.oakland-menu-container').addClass('oakland-active');} //turns oakland menu on/off
					})

          $('.visit-oakland-menu').on('click', function() {
            $('.visit-oakland-menu').addClass('menu-title-active') //adds bue line
            $('.industry-menu').removeClass('menu-title-active') ////removes bue line
            $('.oakland-menu-container').addClass('oakland-active');
            $('.industry-container-menu').removeClass('industry-active');
          })

          $('.industry-menu').on('click', function() {
            $('.industry-menu').addClass('menu-title-active') //adds blue lne
            $('.visit-oakland-menu').removeClass('menu-title-active') //removes blue line
            $('.industry-container-menu').addClass('industry-active');
            $('.oakland-menu-container').removeClass('oakland-active')
          })

					$('.mobile-search-input').on('focus', function() {
						$(this).css('border-bottom', '1px solid lightgray')
					})

					    $('#google_translate_element').bind('DOMNodeInserted', function(event) {
      $('.goog-te-menu-value span:first').html('English');
  
    });

      var redesignScreen = function () {
        var width = $(window).width()
        if (width < 767) {
					$('.fa-search').on('click',function() {
            $('.mobile-search-input').animate({width:'toggle'}, 200)
          })
        }
				if(width < 1025) {
					$('.nav-hit-cont').on('click',function() {
						$('.lang-weather-container').toggleClass('lang-weather-container--active')
					})
				}
      }
			$(document).ready(function () {
        window.onresize = redesignScreen; // calling redesignScreen initially
        redesignScreen();
      })

function changeIFrameStyles() {
if($('.goog-te-menu-frame').contents().find('.goog-te-menu2').length) {
$('.goog-te-menu-frame').contents().find('.goog-te-menu2').css({
  'max-width':'100%',
  'overflow':'scroll',
  'box-sizing':'border-box',
  'height':'auto',
	'width':'100%'
});
} else {
setTimeout(changeIFrameStyles, 50);
}
}
changeIFrameStyles();

     var Weather = function (options) {
            let _queryUri, _unit, _lat, _lnt
            _lnt = options.lnt
            _lat = options.lat
            _unit = options.unit ? options.unit : "c"
            _queryUri = `https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where u='${_unit}' AND woeid in (SELECT woeid FROM geo.places WHERE text="(${_lat},${_lnt})")&format=json`
            return $.ajax(_queryUri).then(res => {
              if (res.status >= 400) {
                throw new Error("Bad response from server")
              }
              return res.query.results
                ? res.query.results.channel.item.condition
                : { code: "NA", temp: "NA" }
            })
          }
          $("#Weather").append(
            Weather({ lat: 42.299152, lnt: -85.591736, unit: "f" }).then(function (
              res
            ) {
              $("#Weather").append(
                $(`<div class="weather-container" style='display: flex; font-weight: bold;'>
          <i style='margin-right: 5px; color: lightblue; display: flex;align-items: center;' class="climacon i${ res.code }"></i>
          <span class="weather-temp-container" style='display: flex; '>
          <b>${ res.temp }</b>
          <div>°</div>
          </span>
          </div>`
                )
              )
            })
          )

  </script>
</body>
</html>