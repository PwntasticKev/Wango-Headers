<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>OakLand</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="css/reset.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="css/oakland.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

</head>
<body>
  <header>
    <section class="main-section">
      <form action="https://www.visitoakland.com/search/" method="GET" data-sv-searchform="" style='display: flex;'>
        <div class="search-btn" data-sv-searchbtn="" aria-hidden="true"><i class="fa fa-search" aria-hidden="true"></i></div>
          <input class='mobile-search-input' type="search" style='display: none;' value="" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" class="searchInput ae-form-field" name="q" data-sv-searchinput="" data-ae-blurbtype="input">
      </form>
      <section style='display: flex;'>
      <div class="menu-title visit-oakland-menu">Visit Oakland</div>
        <div class="pipe">|</div>
        <div class="menu-title industry-menu">Industry</div>
      </section>
      <div class="logo standard-logo" data-sv-logo="" style='display: none;'><a href="https://www.visitoakland.com/"><img src="https://www.visitoakland.com/includes/public/assets/images/logo.svg"></a></div>
      <div class="nav-hit-cont nav-right">
        <div class="upper-line"></div>
          <div class="nav-hit-inner">
              <div class="nav-hit-hider">
                  <img src="https://www.visitoakland.com/includes/public/assets/images/menu-text.svg" class="ae-img">
              </div>
          </div>
          <div class="lower-line"></div>
      </div>
    </section>
  </header>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script>
     var Weather = function (options) {
            let _queryUri, _unit, _lat, _lnt
            _lnt = options.lnt
            _lat = options.lat
            _unit = options.unit ? options.unit : "c"
            _queryUri = `https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where u='${_unit}' AND woeid in (SELECT woeid FROM geo.places WHERE text="(${_lat},${_lnt})")&format=json`
            return $.ajax(_queryUri).then(res => {
              if (res.status >= 400) {
                throw new Error("Bad response from server")
              }
              return res.query.results
                ? res.query.results.channel.item.condition
                : { code: "NA", temp: "NA" }
            })
          }
          $("#Weather").append(
            Weather({ lat: 29.6014, lnt: -96.8314, unit: "f" }).then(function (
              res
            ) {
              $("#Weather").append(
                $(`<div class="weather-container" style='display: flex;'>
          <i style='margin-right: 5px;' class="climacon i${ res.code }"></i>
          <span class="weather-temp-container">
          <b>${ res.temp }</b>
          <div>Â°</div>
          </span>
          </div>`
                )
              )
            })
          )

          $('.nav-hit-cont').on('click',function() {
            $('.ae-img').animate({opacity: 'toggle'}, 250)
            $('.upper-line').toggleClass('menubefore-active')
            $('.lower-line').toggleClass('menuafter-active')
            $('.logo').toggle()
            $('.visit-oakland-menu').addClass('menu-title-active')
            $('.industry-menu').removeClass('menu-title-active')
          })

          $('.visit-oakland-menu').on('click', function() {
            $('.visit-oakland-menu').addClass('menu-title-active')
            $('.industry-menu').removeClass('menu-title-active')
          })

          $('.industry-menu').on('click', function() {
            $('.industry-menu').addClass('menu-title-active')
            $('.visit-oakland-menu').removeClass('menu-title-active')
          })

          $('.fa-search').on('click',function() {
            $('.mobile-search-input').animate({width:'toggle'}, 200)
          })


  </script>
</body>
</html>