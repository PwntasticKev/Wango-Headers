<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>Tacoma</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" type="text/css" media="screen" href="reset.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="style.css" />
		<link rel="stylesheet" href="https://use.typekit.net/vxp3uzh.css" />
		<link
			rel="stylesheet"
			href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
			integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<section class="taco-main-container">
			<img
				src="http://www.traveltacoma.com/includes/public/assets/shell/logo-mobile.png"
				alt="Taco Man img"
				class="tac-home-icon"
			/>
			<section
				id="tac-menu-container"
				style="display: flex; justify-content: space-evenly; width:100%"
			>
				<div class="border-slant">
					<i class="fa fa-search tac-glass " aria-hidden="true"></i>
				</div>
				<section style="display: flex; align-items:center;">
					<div class="tac-burger">
						<br class="tac-line" id="tac-top-line" />
						<br class="tac-line" id="tac-mid-line" />
						<br class="tac-line" id="tac-bot-line" />
					</div>
					<div style="color:white; font-weight: 600; font-size: 20px;">
						MENU
					</div>
				</section>
			</section>
		</section>

		<!-- First Layer Menu -->
		<section class="tac-first-layer-menu">
			<section class="tac-search-container">
				<form
					data-sv-searchform=""
					action="http://www.traveltacoma.com/search/"
					method="GET"
					style="position:relative;"
				>
					<input
						data-sv-searchinput=""
						name="q"
						type="search"
						class="tac-search-input"
						autocapitalize="off"
						placeholder="SEARCH…"
						value=""
					/>
					<i data-sv-searchbtn="" class="fa fa-inverse tac-search-button"></i>
				</form>
			</section>
			<ul>
				<ul class="tac-layer1-menu-item">
					REGIONS
				</ul>
				<ul class="tac-layer1-menu-item">
					THINGS TO DO
				</ul>
				<ul class="tac-layer1-menu-item">
					RESTAURAUNTS
				</ul>
				<ul class="tac-layer1-menu-item">
					HOTELS
				</ul>
				<ul class="tac-layer1-menu-item">
					PLAN
				</ul>
			</ul>
			<div class="tac-border" />
			<ul>
				<ul class="tac-layer1-menu-item layer1-mid-menu">
					MEETINGS
				</ul>
				<ul class="tac-layer1-menu-item layer1-mid-menu">
					PARTNERS
				</ul>
				<ul class="tac-layer1-menu-item layer1-mid-menu">
					MEDIA
				</ul>
				<ul class="tac-layer1-menu-item layer1-mid-menu">
					TOURS
				</ul>
			</ul>
			<div class="tac-border" />
			<ul>
				<ul class="tac-layer1-menu-item layer1-mid-menu">
					ABOUT
				</ul>
				<ul class="tac-layer1-menu-item layer1-mid-menu">
					CONTACT
				</ul>
				<li class="tac-layer1-menu-item layer1-mid-menu">PRIVACY POLICY</li>
			</ul>
      <section class="tac-search-container">
        <a href="http://www.traveltacoma.com//tripbuilder/" class="tac-flex tac-my-itinerary">
          <img src="http://www.traveltacoma.com//includes/public/assets/tripbuilder/tripbuilder-icon.png"> 
          <div class="tac-my-itin-txt">
            My Intinerary (0)
          </div>
        </a>
      </section>
      <section>
        <div id="testWeather"></div>
      </section>
    </section>

		<!-- JS -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script>
			$("#tac-menu-container").click(function() {
				$("#tac-top-line").toggleClass("tac-top-line")
				$("#tac-mid-line").toggleClass("tac-mid-line")
				$("#tac-bot-line").toggleClass("tac-bot-line")
      })
      
  var Weather = function(options) {
	let _queryUri, _unit, _lat, _lnt
	_lnt = options.lnt
	_lat = options.lat
	_unit = options.unit ? options.unit : "c"
	_queryUri = `https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where u='${_unit}' AND woeid in (SELECT woeid FROM geo.places WHERE text="(${_lat},${_lnt})")&format=json`
	return $.ajax(_queryUri).then(res => {
		if (res.status >= 400) {
			throw new Error("Bad response from server")
		}
		return res.query.results
			? res.query.results.channel.item.condition
			: { code: "NA", temp: "NA" }
	})
}
$("#testWeather").append(
		Weather({ lat: 47.1185, lnt: -122.5633, unit: "f" }).then(function(
			res
		) {
			console.log('this is my response',res)
			$("#testWeather").append( 
				$(
					`<div class="sltl-weather"><i class="climacon i${
						res.code
					}"></i><span class="sltl-weather--temp"><b>${
						res.temp
					}</b><sup>°</sup></span></div>`
				)
			)
		})
	)
		</script>
	</body>
</html>
